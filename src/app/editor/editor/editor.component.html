<div class="main-panel">
  <div class="buttons">
    <div class="left">
        <input type="button" value="Sequences manager" (click)="managerDisplayed = !managerDisplayed">
    </div>
    <div class="sequence-name">
        {{ currentPath }}
      </div>
    <div class="right">
        <input type="button" value="Save" (click)="save()">
    </div>
  </div>
  <div class="bottom-panel">
      <div class="left-panel">
    
          <div class="editor">
            <ngx-codemirror #editor
              [(ngModel)]="content" 
              [options]="{
                lineNumbers: true,
                theme: 'material',
                mode: 'tgs',
                extraKeys: { 'Ctrl-Space': 'autocomplete'}
              }"
              (cursorActivity)="onCursorActivity($event)">
            </ngx-codemirror>
          </div>
        </div>
        <div class="right-panel">
            <div *ngIf="mainModel">
              <div class="block-item"
                [class.selected]="currentBlock === block"
                *ngFor="let block of mainModel.blocksArray"
                (click)="selectBlock(block)">
                {{ block.id }}
              </div>
            </div>
        </div>
        <div class="panel-separator">

        </div>
        <div class="game-display-panel">
          <div class="display-tools">
            <div class="left-sub-panel">
              <ng-container *ngIf="selectedDisplayPanel === 'display'">
                <input type="button" value="Reload" (click)="reloadGameDisplay()">
                <input type="button" value="Reset" (click)="resetGameDisplay()">
              </ng-container>
              <ng-container *ngIf="selectedDisplayPanel === 'console'">
                <input type="button" value="Clear logs" (click)="clearLogs()">
              </ng-container>
            </div>
            <div class="right-sub-panel">
              <input
                [class.selected]="selectedDisplayPanel === 'display'"
                (click)="selectedDisplayPanel = 'display'"
                type="button" value="Display">
              <input
                [class.selected]="selectedDisplayPanel === 'console'"
                (click)="selectedDisplayPanel = 'console'"
                type="button" value="Console">
              <input
                [class.selected]="selectedDisplayPanel === 'variables'"
                (click)="selectedDisplayPanel = 'variables'"
                type="button" value="Variables">
            </div>
          </div>
          <div id="main-structure-scroll" class="display-container">
              <app-main-structure
                *ngIf="selectedDisplayPanel === 'display' && content"
                (externalNavigation)="onExternalNavigation($event)"
                mode="debug"
                [path]="currentPath"
                [content]="content">
              </app-main-structure>
              <app-variables-inspector *ngIf="selectedDisplayPanel === 'variables'"></app-variables-inspector>
              <app-logs-viewer #logs *ngIf="selectedDisplayPanel === 'console'"></app-logs-viewer>
          </div>
        </div>
  </div>
</div>
<app-sequences-manager (close)="managerDisplayed = false" (navigation)="onNavigation($event)" *ngIf="managerDisplayed"></app-sequences-manager>